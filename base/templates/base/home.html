{% extends "base/base.html" %}

{% load static %}

{% block navbar_css %}
<link rel="stylesheet" type="text/css" href="{% static 'base/css/home.css' %}">
<link href="https://cdn.jsdelivr.net/npm/remixicon@2.5.0/fonts/remixicon.css" rel="stylesheet">
<!-- Add ScrollReveal -->
<script src="https://unpkg.com/scrollreveal"></script>
{% endblock %}


{% block scripts %}
<script src="{% static 'base/js/main.js' %}"></script>
{% endblock %}

{% block content %}


 <header class="header__container">
      <div class="header__image">
        <div class="header__image__card header__image__card-1">
          <span><i class="ri-key-line"></i></span>
          Prediction
        </div>
        <div class="header__image__card header__image__card-2">
          <span><i class="ri-passport-line"></i></span>
          Products
        </div>
        <div class="header__image__card header__image__card-3">
          <span><i class="ri-map-2-line"></i></span>
          Clinics
        </div>
        <div class="header__image__card header__image__card-4">
          <span><i class="ri-guide-line"></i></span>
          Recommendation
        </div>
        <img src="{% static 'base/images/main.png' %}" alt="header" />

      </div>
      <div class="header__content">
        <h1>UNLOCK YOUR<br /> <span>HAIR'S FUTURE </span> </h1><h2>DISCOVER, PREVENT, AND REVIVE.</h2>
        <p>
          Get a personalized hair fall risk assessment in seconds!
          Discover expert recommendations tailored to your hair type.
          Shop premium hair care products and connect with top clinics.
        </p>
        <form action="/">
          <div class="input__row">
            <div class="input__group">
              <h5>Destination</h5>
              <div>
                <span><i class="ri-map-pin-line"></i></span>
                <input type="text" placeholder="Paris, France" />
              </div>
            </div>
            <div class="input__group">
              <h5>Date</h5>
              <div>
                <span><i class="ri-calendar-2-line"></i></span>
                <input type="text" placeholder="17 July 2024" />
              </div>
            </div>
          </div>
          <button type="submit">Search</button>
        </form>


      </div>
    </header>


<section class="product-section-feature">
  <h2 class="product-heading-feature">Featured Products</h2>

  <div class="slider-container-feature">
    <div class="slider-track-feature">
      {% for product in products %}
        {% if product.status == 'Approved' %}
          <div class="product-card-feature">
            <a href="{% url 'recom-product-detail' product.slug %}" class="product-link-feature">
              <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-image-feature">
              <h3 class="product-name-feature">{{ product.name |truncatewords:10 }}</h3>
              <div class="product-price-feature">{{ product.cost }}</div>
              {% if product.stock > 0 %}
                <div class="stock-badge-feature">In Stock</div>
              {% else %}
                <div class="stock-badge-feature stock-badge-out">Out of Stock</div>
              {% endif %}
            </a>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>

  <div class="nav-buttons-feature">
    <button class="nav-button-feature prev-btn" aria-label="Previous">←</button>
    <button class="nav-button-feature next-btn" aria-label="Next">→</button>
  </div>
</section>

<script>
document.addEventListener('DOMContentLoaded', function() {
  const track = document.querySelector('.slider-track-feature');
  const cards = document.querySelectorAll('.product-card-feature');
  const prevBtn = document.querySelector('.prev-btn');
  const nextBtn = document.querySelector('.next-btn');

  let currentIndex = 0;
  const cardWidth = 304; // 280px + 24px gap
  const visibleCards = Math.floor(track.parentElement.offsetWidth / cardWidth);
  const maxIndex = Math.max(0, cards.length - visibleCards);

  function updateSlider() {
    track.style.transform = `translateX(-${currentIndex * cardWidth}px)`;
    prevBtn.disabled = currentIndex === 0;
    nextBtn.disabled = currentIndex === maxIndex;
  }

  prevBtn.addEventListener('click', () => {
    currentIndex = Math.max(currentIndex - 1, 0);
    updateSlider();
  });

  nextBtn.addEventListener('click', () => {
    currentIndex = Math.min(currentIndex + 1, maxIndex);
    updateSlider();
  });

  // Initial update
  updateSlider();

  // Update on window resize
  window.addEventListener('resize', () => {
    const newVisibleCards = Math.floor(track.parentElement.offsetWidth / cardWidth);
    const newMaxIndex = Math.max(0, cards.length - newVisibleCards);
    currentIndex = Math.min(currentIndex, newMaxIndex);
    updateSlider();
  });
});
</script>
{% endblock content%}
