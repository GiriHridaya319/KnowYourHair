{% extends 'base/base.html' %}
{% load static %}

{% block main_product_css %}
<link rel="stylesheet" type="text/css" href="{% static 'product/css/main_product.css' %}">
{% endblock %}

{% block content %}
     <div class="container">
         <a href="{% url 'product-create' %}" class="start-survey-btn ">ADD</a>
        <div class="title">PRODUCT LIST</div>
         <div class="pro_search_wrapper">
    <div class="pro_search_container">
        <input type="text" class="pro_search_input" placeholder="Search products...">
        <button class="pro_search_button">
            <svg class="pro_search_icon" viewBox="0 0 24 24">
                <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>
            </svg>
            <span>Search</span>
        </button>
    </div>


</div>
        <div class="listProduct">
            {% for product in products %}
                <a href="{% url 'recom-product-detail' product.slug %}" class="item">
                    <img src="{{ product.image.url }}" alt="{{ product.name }}">
                    <div class="item-content">
                        <h2>{{ product.name |truncatewords:10 }}</h2>
                        <div class="separator-box"></div>
                        <div class="price">NRs. {{ product.cost }}</div>
                        {% if product.stock > 0 %}
                            <div class="stock-badge">In Stock</div>
                        {% else %}
                            <div class="stock-badge" style="background-color: #ffeeee; color: #e74c3c;">Out of Stock</div>
                        {% endif %}
                    </div>
                </a>
            {% endfor %}
        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            // Add animation for items as they come into view
            const items = document.querySelectorAll('.item');

            // Check if IntersectionObserver is supported
            if ('IntersectionObserver' in window) {
                const observer = new IntersectionObserver((entries) => {
                    entries.forEach(entry => {
                        if (entry.isIntersecting) {
                            entry.target.style.opacity = 1;
                            entry.target.style.transform = 'translateY(0)';
                            observer.unobserve(entry.target);
                        }
                    });
                }, {
                    threshold: 0.1
                });

                items.forEach(item => {
                    item.style.opacity = 0;
                    item.style.transform = 'translateY(20px)';
                    item.style.transition = 'opacity 0.5s ease, transform 0.5s ease';
                    observer.observe(item);
                });
            } else {
                // Fallback for browsers that don't support IntersectionObserver
                items.forEach(item => {
                    item.style.opacity = 1;
                    item.style.transform = 'translateY(0)';
                });
            }
        });
    </script>
{% endblock %}
